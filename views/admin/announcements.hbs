<h1 class="mb-3">HELLO! 即時通後台</h1>

<div class="mb-3">
  <a href="/admin/announcements/new" class="btn btn-primary"><i class="fa-solid fa-wand-magic-sparkles" style="color: #ffffff;"></i>發布新公告</a>
</div>

<div class="list-group mb-3">
  {{#if announcements}}
    {{#each announcements}}
      <div class="d-flex align-items-center">
        <a href="/announcements/{{ this.id }}" class="list-group-item list-group-item-action">【{{date this.createdAt}}】{{ this.title }}</a>
        {{#if ../user.isAdmin}}
          <a href="/admin/announcements/{{ this.id }}/edit" class="btn btn-success mx-1"><i class="fa-solid fa-pen" style="color: #ffffff;"></i></a>
          <form action="/admin/announcements/{{ this.id }}" method="POST"><button class="btn btn-danger" type="submit"><i class="fa-solid fa-trash" style="color: #ffffff;"></i></button></form>
        {{/if}}
      </div>
    {{/each}}
  {{else}}
  <h1>暫無公告</h1>
  {{/if}}
</div>

<nav class="mt-3" aria-label="page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item {{#ifCond pagination.currentPage 1}}disabled{{/ifCond}}">
      <a class="page-link" href="/admin/announcements?page={{pagination.prev}}" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>
    {{#each pagination.pages}}
      {{#ifCond this ../pagination.currentPage}}
        <li class="page-item active"><a class="page-link" href="#">{{this}}</a></li>
      {{else}}
        <li class="page-item">
          <a class="page-link" href="/admin/announcements?page={{this}}">{{this}}</a>
        </li>
      {{/ifCond}}
    {{/each}}
    <li class="page-item {{#ifCond pagination.currentPage pagination.totalPage}}disabled{{/ifCond}}">
      <a class="page-link" href="/admin/announcements?page={{pagination.next}}" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
  </ul>
</nav>